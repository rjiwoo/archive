<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 1. 단축 속성
    const name = 'Alice'
    const age = 30

    // 단축 속성 전
    // const user = {
    //   name: name,
    //   age: age
    // }

    // 단축 속성 후
    const user = {
      name, age
    }

    // 2. 단축 메서드

    // 단축 메서드 전 
    // const myObj1 = {
    //   myFunc: function () {
    //     return 'Hello'
    //   }
    // }

    // 단축 메서드 후 
    const myObj1 = {
      myFunc() {
        return 'Hello'
      }
    }

    // 3. 계산된 속성
    const product = prompt('물건 이름을 입력해주세요')
    const prefix = 'my'
    const suffix = 'property'

    const bag = {
      [product]: 5,
      [prefix + suffix]: 'value'
    }

    console.log(bag) // {연필: 5, myproperty: 'value'}


    // 4. 구조 분해 할당
    const userInfo = {
      firstName: 'Alice',
      userId: 'alice123',
      email: 'alice123@gmail.com'
    }

    // 구조 분해 할당 전 
    // const firstName = userInfo.firstName
    // const userId = userInfo.userId
    // const email = userInfo.email

    // 구조 분해 할당 후 
    // const { firstName } = userInfo
    // const { firstName, userId } = userInfo
    const { firstName, userId, email } = userInfo
    console.log(firstName, userId, email)

    // 구조 분해 할당 활용 - 함수 매개변수
    // 구조 분해 할당 활용 전 
    // function printInfo(userInfo) {
    //   console.log(`이름: ${userInfo.firstName}, 나이: ${userInfo.age}, 도시: ${userInfo.city}`)
    // }
    // printInfo(userInfo)

    // 구조 분해 할당 활용 후
    function printInfo({ firstName, email }) {
      console.log(`이름: ${firstName}, 이메일: ${email}`)
    }
    printInfo(userInfo)

    // 5. 전개 구문
    const obj = { a: 2, c: 3, d: 4 }
    const newObj = {...obj, a: 1,  e: 5 }
    console.log(newObj) // {a: 1, b: 2, c: 3, d: 4, e: 5}

    // 6. 유용한 객체 메서드
    const profile = {
      name: 'Alice',
      age: 30
    }

    console.log(Object.keys(profile)) // ['name', 'age']
    console.log(Object.values(profile)) // ['Alice', 30]
    console.log(Object.entries(profile)) // [['name', 'Alice'], ['age', 30]]

    // 7. Optional Chaining
    const userData = {
      name: 'Alice',
      greeting: function () {
        return 'hello'
      }
    }

    // 예전 방식 
    console.log(userData.address && userData.address.street) // undefined

    // 변수 옵셔널 체이닝 
    console.log(userData.address.street) // Uncaught TypeError: Cannot read properties of undefined (reading 'street')
    console.log(userData.address?.street) // undefined

    // 함수 옵셔널 체이닝 
    console.log(userData.nonMethod()) // Uncaught TypeError: user.nonMethod is not a function
    console.log(userData.nonMethod?.()) // undefined
    

    // 위 예시 코드 논리상 user는 반드시 있어야 하지만 address는 필수 값이 아님
    // user에 값을 할당하지 않은 문제가 있을 때 바로 알아낼 수 있어야 하기 때문
    // Bad
    userData?.address?.street

    // Good 
    userData.address?.street
  </script>
</body>

</html>
